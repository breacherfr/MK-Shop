<!DOCTYPE html>
<html lang="fr" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MK SHOP - V19 RECORRIG√âE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: { sans: ['Montserrat', 'sans-serif'] },
                    colors: { mk: { bg: '#0f172a', card: '#1e293b', accent: '#06b6d4' } }
                }
            }
        }
    </script>
    <style>
        .glass { background: rgba(30, 41, 59, 0.7); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.05); }
        .chat-bubble-me { background: #06b6d4; color: white; border-radius: 15px 15px 0 15px; }
        .chat-bubble-other { background: #334155; color: white; border-radius: 15px 15px 15px 0; }
    </style>
</head>
<body class="bg-mk-light dark:bg-mk-bg text-slate-900 dark:text-white min-h-screen transition-colors duration-300">

    <nav class="glass sticky top-0 z-50 px-6 py-4 flex justify-between items-center">
        <div class="flex items-center gap-2 cursor-pointer" onclick="location.reload()">
            <span class="text-2xl">üõçÔ∏è</span>
            <h1 class="text-xl font-black italic">MK <span class="text-mk-accent">SHOP</span></h1>
        </div>

        <div class="flex items-center gap-4">
            <button onclick="document.documentElement.classList.toggle('dark')" class="p-2 bg-gray-200 dark:bg-gray-800 rounded-full">üåì</button>
            <button id="nav-tv-btn" onclick="openTvSection()" class="hidden bg-red-600 text-white text-[10px] font-bold px-3 py-2 rounded-lg animate-pulse">üì∫ ACC√àS TV</button>
            <div id="user-display" class="hidden text-xs font-bold text-mk-accent border border-mk-accent px-3 py-1 rounded-full"></div>
            <div id="auth-btns" class="flex gap-2">
                <button onclick="openModal('auth-modal')" class="text-xs font-bold">CONNEXION</button>
                <button onclick="openModal('auth-modal')" class="bg-mk-accent text-white text-xs font-bold px-4 py-2 rounded-lg">REJOINDRE</button>
            </div>
            <button onclick="openAdminAuth()" class="text-[8px] opacity-10">ADMIN</button>
        </div>
    </nav>

    <main id="shop-view" class="max-w-7xl mx-auto p-6 md:p-10">
        <div class="text-center mb-12">
            <h2 class="text-5xl font-black italic bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-500 uppercase">Catalogue MK</h2>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">

            <div class="glass p-6 rounded-3xl relative border border-mk-accent/50 group">
                <div class="absolute top-0 right-0 bg-mk-accent text-black text-[10px] font-bold px-3 py-1 rounded-bl-xl z-10">BEST SELLER</div>
                <div class="text-5xl mb-4">üéÆ</div>
                <h3 class="text-2xl font-bold mb-2">Comptes Roblox</h3>
                <p class="text-xs text-gray-400 mb-4 uppercase font-bold tracking-wide">COMPTES OPTIMIS√âS</p>
                <ul class="text-sm text-gray-300 space-y-2 mb-6 border-l-2 border-mk-accent pl-4">
                    <li>‚Ä¢ 0 - 1000 Robux al√©atoire</li>
                    <li>‚Ä¢ Compte Full sur certains jeux</li>
                    <li>‚Ä¢ V√©rification d'√¢ge (+13)</li>
                </ul>
                <div class="flex justify-between items-center mt-auto">
                    <span class="text-2xl font-black text-mk-accent">5‚Ç¨ - 30‚Ç¨</span>
                    <button onclick="startChat('Compte Roblox', '5‚Ç¨-30‚Ç¨')" class="bg-white text-black font-bold px-6 py-2 rounded-full hover:bg-mk-accent transition">ACHETER</button>
                </div>
            </div>

            <div class="glass p-6 rounded-3xl">
                <div class="text-5xl mb-4">üì∫</div>
                <h3 class="text-2xl font-bold mb-2">TV & Anim√©s</h3>
                <p class="text-xs text-gray-400 mb-4 uppercase font-bold tracking-wide">STREAMING & IPTV</p>
                <ul class="text-sm text-gray-300 space-y-2 mb-6 border-l-2 border-mk-accent pl-4">
                    <li>‚Ä¢ D√©ssins anim√©s, anim√©s</li>
                    <li>‚Ä¢ Chaine de t√©l√© fran√ßaise</li>
                    <li>‚Ä¢ Acc√®s illimit√© 24/7</li>
                </ul>
                <div class="flex justify-between items-center mt-auto">
                    <span class="text-2xl font-black text-mk-accent">4‚Ç¨<span class="text-xs text-gray-400 font-normal">/mois</span></span>
                    <button onclick="startChat('Abonnement TV', '4‚Ç¨')" class="bg-white text-black font-bold px-6 py-2 rounded-full hover:bg-mk-accent transition">ACHETER</button>
                </div>
            </div>

            <div class="glass p-6 rounded-3xl border border-red-500/20">
                <div class="text-5xl mb-4">üéØ</div>
                <h3 class="text-2xl font-bold mb-2 text-red-500">Cheat & Tools</h3>
                <p class="text-xs text-gray-400 mb-4 uppercase font-bold tracking-wide">DOMINATION GAMING</p>
                <ul class="text-sm text-gray-300 space-y-2 mb-6 border-l-2 border-red-500 pl-4">
                    <li>‚Ä¢ Fortnite (Aimbot, ESP)</li>
                    <li>‚Ä¢ Roblox Scripts & Executors</li>
                    <li>‚Ä¢ GTA V Mod Menus</li>
                </ul>
                <div class="flex justify-between items-center mt-auto">
                    <span class="text-2xl font-black text-red-500">6‚Ç¨ - 10‚Ç¨</span>
                    <button onclick="startChat('Cheat Gaming', '6‚Ç¨-10‚Ç¨')" class="bg-white text-black font-bold px-6 py-2 rounded-full hover:bg-red-500 hover:text-white transition">ACHETER</button>
                </div>
            </div>

            <div class="glass p-6 rounded-3xl md:col-span-2 border border-purple-500/30 bg-purple-900/10">
                <div class="flex flex-col md:flex-row gap-6">
                    <div class="text-5xl">‚ú®</div>
                    <div>
                        <h3 class="text-2xl font-bold mb-2 text-purple-400">Demande Personnalis√©e</h3>
                        <p class="text-xs text-gray-400 mb-4 font-bold tracking-wide">BESOIN D'UN TRUC PR√âCIS ?</p>
                        <p class="text-sm text-gray-300 mb-6">Un compte rare, un film sp√©cifique ou un script ? On s'en occupe pour vous.</p>
                        <button onclick="startChat('Demande Personnalis√©e', 'Sur Devis')" class="bg-purple-600 text-white font-bold px-8 py-3 rounded-full hover:bg-purple-500 transition shadow-lg shadow-purple-500/20">CONTACTER LE VENDEUR</button>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <div id="tv-view" class="hidden fixed inset-0 z-[60] bg-black overflow-y-auto p-4 lg:p-10">
        <div class="flex justify-between items-center mb-10">
            <h2 class="text-3xl font-black text-mk-accent italic">MK <span class="text-white">STREAMING</span></h2>
            <button onclick="closeTvSection()" class="bg-white/10 px-4 py-2 rounded-lg text-xs font-bold uppercase">Retour Boutique</button>
        </div>
        <div id="tv-unlock" class="max-w-md mx-auto text-center py-20">
            <h3 class="text-xl font-bold mb-4">Entrez votre code d'acc√®s MK TV</h3>
            <input id="tv-password" type="text" placeholder="ACCES-ACHETER-0001" class="w-full bg-slate-900 border border-white/20 p-4 rounded-xl mb-4 text-center font-mono outline-none focus:border-mk-accent">
            <button onclick="unlockTv()" class="bg-mk-accent text-black font-bold px-10 py-3 rounded-xl hover:bg-white transition">D√âVERROUILLER</button>
        </div>
        <div id="tv-content" class="hidden">
            <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
                <div class="lg:col-span-3">
                    <div class="aspect-video bg-slate-900 rounded-3xl overflow-hidden border border-white/10 relative shadow-2xl">
                        <iframe id="yt-iframe" src="" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen class="hidden w-full h-full"></iframe>
                        <video id="hls-player" class="hidden w-full h-full" controls></video>
                    </div>
                    <h3 id="current-title" class="text-2xl font-bold mt-4 text-mk-accent">S√©lectionnez un programme</h3>
                </div>
                <div class="bg-slate-900/50 p-4 rounded-2xl border border-white/5 h-[600px] overflow-y-auto">
                    <p class="text-[10px] font-bold text-gray-500 uppercase mb-4">Cha√Ænes & Films</p>
                    <div id="playlist-items" class="space-y-2"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="auth-modal" class="hidden fixed inset-0 z-[100] bg-black/90 backdrop-blur-sm flex items-center justify-center p-4">
        <div class="bg-mk-card p-8 rounded-3xl w-full max-w-sm border border-white/10 shadow-2xl text-center">
            <h3 class="text-2xl font-black mb-6 uppercase">Acc√®s Client</h3>
            <input id="in-user" type="text" placeholder="Pseudo" class="w-full bg-black border border-white/10 p-3 rounded-xl mb-3 outline-none focus:border-mk-accent">
            <input id="in-pass" type="password" placeholder="Mot de passe" class="w-full bg-black border border-white/10 p-3 rounded-xl mb-6 outline-none focus:border-mk-accent">
            <button onclick="handleAuth()" class="w-full bg-mk-accent text-black font-bold py-3 rounded-xl uppercase">Valider</button>
            <button onclick="closeModal('auth-modal')" class="mt-4 text-[10px] opacity-50 uppercase tracking-widest">Fermer</button>
        </div>
    </div>

    <div id="chat-modal" class="hidden fixed inset-0 z-[100] bg-black/80 flex items-center justify-center p-4">
        <div class="bg-mk-card w-full max-w-md h-[550px] rounded-3xl overflow-hidden flex flex-col border border-white/10 shadow-2xl">
            <div class="bg-mk-accent p-4 text-black font-bold flex justify-between items-center">
                <span id="chat-target">Chat Vendeur</span>
                <button onclick="closeModal('chat-modal')" class="text-xl">‚úï</button>
            </div>
            <div id="chat-body" class="flex-1 p-4 overflow-y-auto space-y-4 bg-black/20"></div>
            <div class="p-4 bg-slate-800 flex gap-2 border-t border-white/5">
                <input id="chat-input" type="text" placeholder="√âcrire un message..." class="flex-1 bg-black rounded-full px-4 text-sm outline-none text-white border border-white/10 focus:border-mk-accent">
                <button onclick="sendMsg()" class="bg-mk-accent text-black w-10 h-10 rounded-full flex items-center justify-center font-bold">‚û§</button>
            </div>
        </div>
    </div>

    <div id="admin-modal" class="hidden fixed inset-0 z-[200] bg-black p-6 overflow-y-auto font-mono">
        <div class="max-w-5xl mx-auto">
            <div class="flex justify-between items-center border-b border-white/10 pb-4 mb-8">
                <h2 class="text-green-500 text-xl font-bold italic">MK_CONTROL_CENTER</h2>
                <button onclick="closeModal('admin-modal')" class="text-red-500 border border-red-500 px-4 py-1 rounded text-xs hover:bg-red-500 hover:text-black">D√âCONNEXION</button>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="bg-slate-900 p-6 rounded-2xl border border-white/5">
                    <h3 class="text-xs font-bold mb-4 text-mk-accent uppercase tracking-widest">Base de Donn√©es Utilisateurs</h3>
                    <div id="admin-user-list" class="space-y-2"></div>
                </div>
                <div class="bg-slate-900 p-6 rounded-2xl border border-white/5">
                    <h3 class="text-xs font-bold mb-4 text-yellow-500 uppercase tracking-widest">Flux Messages Intercept√©s</h3>
                    <div id="admin-chat-logs" class="space-y-2"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // CONFIG
        const TV_CODE = "ACCES-ACHETER-0001";
        const ADMIN_PASS = "AdminCode-CodeAdmin-fr/en";

        let user = JSON.parse(localStorage.getItem('mk_session')) || null;
        let db = JSON.parse(localStorage.getItem('mk_db')) || [];
        let logs = JSON.parse(localStorage.getItem('mk_logs')) || [];

        const media = [
            {t: "TF1 HD", u: "https://vcl-v7.unm.is/TF1/index.m3u8", type: "hls"},
            {t: "M6 HD", u: "https://vcl-v7.unm.is/M6/index.m3u8", type: "hls"},
            {t: "BFM TV", u: "https://bfmtv-lh.akamaihd.net/i/bfmtv_1@446033/index_1080_av-p.m3u8", type: "hls"},
            {t: "One Piece S1", u: "r72_Vl5X-1c", type: "yt"},
            {t: "Dragon Ball Super", u: "Fp9pNPdNwjI", type: "yt"},
            {t: "Masha et Michka", u: "f_Xo_Uq_27A", type: "yt"},
            {t: "Pat' Patrouille", u: "QfEv8Af3Mtk", type: "yt"},
            {t: "Spider-Man Short Film", u: "eX0uL-X1E9w", type: "yt"}
        ];

        window.onload = () => {
            if(user) applySession();
            loadPlaylist();
        };

        // AUTH & SESSION
        function handleAuth() {
            const u = document.getElementById('in-user').value;
            const p = document.getElementById('in-pass').value;
            if(!u || !p) return;
            let existing = db.find(x => x.u === u);
            if(existing) user = existing; else {
                user = { u: u, p: p, hasTv: false };
                db.push(user);
            }
            localStorage.setItem('mk_db', JSON.stringify(db));
            localStorage.setItem('mk_session', JSON.stringify(user));
            applySession();
            closeModal('auth-modal');
        }

        function applySession() {
            document.getElementById('auth-btns').classList.add('hidden');
            const ud = document.getElementById('user-display');
            ud.classList.remove('hidden'); ud.innerText = user.u;
            if(user.hasTv) document.getElementById('nav-tv-btn').classList.remove('hidden');
        }

        // CHAT
        function startChat(prod, price) {
            if(!user) return openModal('auth-modal');
            openModal('chat-modal');
            document.getElementById('chat-target').innerText = prod + " (" + price + ")";
            document.getElementById('chat-body').innerHTML = `<div class="chat-bubble-other p-3 text-sm max-w-[80%]">Bonjour ! Vous √™tes int√©ress√© par : ${prod} ?</div>`;
        }

        function sendMsg() {
            const i = document.getElementById('chat-input');
            if(!i.value) return;
            const body = document.getElementById('chat-body');
            body.innerHTML += `<div class="chat-bubble-me p-3 text-sm self-end ml-auto max-w-[80%]">${i.value}</div>`;
            logs.push({ u: user.u, m: i.value, t: new Date().toLocaleTimeString() });
            localStorage.setItem('mk_logs', JSON.stringify(logs));
            
            setTimeout(() => {
                body.innerHTML += `<div class="chat-bubble-other p-3 text-sm max-w-[80%]">Salut, ${user.u} quelqu'un va te r√©pondre bientot, si tu veut une r√©ponse plus rapide ajoute "mkdevlopper" sur discord!</div>`;
                body.scrollTop = body.scrollHeight;
            }, 1000);
            i.value = "";
            body.scrollTop = body.scrollHeight;
        }

        // TV LOGIC
        function openTvSection() { 
            document.getElementById('shop-view').classList.add('hidden');
            document.getElementById('tv-view').classList.remove('hidden');
        }
        function closeTvSection() {
            document.getElementById('tv-view').classList.add('hidden');
            document.getElementById('shop-view').classList.remove('hidden');
        }
        function unlockTv() {
            if(document.getElementById('tv-password').value === TV_CODE) {
                document.getElementById('tv-unlock').classList.add('hidden');
                document.getElementById('tv-content').classList.remove('hidden');
            } else { alert("Code incorrect !"); }
        }
        function loadPlaylist() {
            const container = document.getElementById('playlist-items');
            media.forEach((m, idx) => {
                container.innerHTML += `<div onclick="play(${idx})" class="p-3 bg-white/5 rounded-xl cursor-pointer hover:bg-mk-accent hover:text-black transition text-xs font-bold">${m.t}</div>`;
            });
        }
        function play(idx) {
            const m = media[idx];
            document.getElementById('current-title').innerText = m.t;
            const ytIframe = document.getElementById('yt-iframe');
            const hlsPlayer = document.getElementById('hls-player');
            if(m.type === 'yt') {
                hlsPlayer.classList.add('hidden'); hlsPlayer.pause();
                ytIframe.classList.remove('hidden'); ytIframe.src = `https://www.youtube.com/embed/${m.u}?autoplay=1`;
            } else {
                ytIframe.classList.add('hidden'); ytIframe.src = "";
                hlsPlayer.classList.remove('hidden');
                if (Hls.isSupported()) {
                    const hls = new Hls(); hls.loadSource(m.u); hls.attachMedia(hlsPlayer);
                    hls.on(Hls.Events.MANIFEST_PARSED, () => hlsPlayer.play());
                }
            }
        }

        // ADMIN LOGIC
        function openAdminAuth() {
            const p = prompt("ACC√àS RESTREINT - ENTRER CODE :");
            if(p === ADMIN_PASS) { openModal('admin-modal'); renderAdmin(); }
        }
        function renderAdmin() {
            const ul = document.getElementById('admin-user-list');
            ul.innerHTML = "";
            db.forEach((u, i) => {
                ul.innerHTML += `<div class="flex justify-between items-center p-3 bg-black/50 rounded-xl border border-white/5 text-[10px]">
                    <span><b class="text-mk-accent">${u.u}</b> : ${u.p}</span>
                    <button onclick="toggleTvAccess(${i})" class="${u.hasTv ? 'text-green-500' : 'text-gray-500'} font-bold">
                        ${u.hasTv ? '[AUTORIS√â]' : '[DONNER ACC√àS TV]'}
                    </button>
                </div>`;
            });
            const cl = document.getElementById('admin-chat-logs');
            cl.innerHTML = logs.slice().reverse().map(l => `
                <div class="p-3 bg-black/30 mb-2 rounded-xl text-[10px] border-l-2 border-mk-accent">
                    <span class="text-gray-500">${l.t}</span> | <b class="text-mk-accent">${l.u}:</b> ${l.m}
                </div>
            `).join('');
        }
        function toggleTvAccess(idx) {
            db[idx].hasTv = !db[idx].hasTv;
            localStorage.setItem('mk_db', JSON.stringify(db));
            renderAdmin();
            alert("Acc√®s TV modifi√© pour cet utilisateur.");
        }

        // UTILS
        function openModal(id) { document.getElementById(id).classList.remove('hidden'); }
        function closeModal(id) { document.getElementById(id).classList.add('hidden'); }
    </script>
</body>
</html>
